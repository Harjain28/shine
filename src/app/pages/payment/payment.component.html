<!-- <div class="headerBackground"></div> -->
<div class="paymentUnsuccessful" *ngIf="transactionFailed">
  <div class="container">
    <div class="row">
      <div class="col-lg-9 col-md-10 col-sm-12 m-auto">
        <div class="title">
          <h3>
            <mat-icon>warning</mat-icon>
            Payment Unsuccessful
          </h3>
          <p>No funds were taken from your account. In case of a deduction, you will receive a refund within 5-7
            business days. Please input accurate information or try another payment method.</p>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="annualPlanSection">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="heading text-center ">
          <h3>You have selected our <span>{{filteredData?.Headertext}} Plan</span>!</h3>
          <!-- <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p> -->
          <button class="btn backbtn" (click)="back()">
            <mat-icon>keyboard_arrow_left</mat-icon>
            Back</button>
        </div>
      </div>
      <div class="col-lg-6 co-md-12 col-sm-12">
        <div class="confirmOrder">
          <h3>Please Confirm Order</h3>
          <p>Thank you for your purchase! Please review your order details below before proceeding to payment.</p>

          <ul>
            <li>
              <span>Shine {{filteredData?.Headertext}} Plan</span>
              <span><b>₹{{planPrice}}</b></span>
            </li>
            <li *ngIf = "!discountSection">
              <span>
                <div class="from-control" [ngClass]="{ 'invalid-coupon': isInvalidCoupon  }">
                  <input type="text" [ngClass]="{ 'invalid-coupon': isInvalidCoupon }" placeholder="Enter Coupon Code" [(ngModel)]="couponInput" (input)="onInputChange()" >
                  <button class="btn" [disabled]="isButtonDisabled" (click)="couponCode()">Apply</button>
                </div>
                <div *ngIf="isInvalidCoupon" class="error-text">Invalid coupon</div>

              </span>
            </li>
            <li *ngIf = "discountSection">
              <span>Discount Offer (<span>Coupon Applied</span>) <button class="btn cancel" (click)="cancelCoupon()"><img src="./assets/LandingPage/crossIcon.svg" alt=""></button></span>
              <span><b class="color">₹{{discountPrice}}</b></span>
            </li>
            
            <li *ngIf= "state !== 'Maharashtra'">
              <span>GST</span>
              <span><b>₹{{calGST | number:'1.2-2'}}</b></span>
            </li>
            <li  *ngIf= "state === 'Maharashtra'">
              <span>CGST</span>
              <span><b>₹{{calGST/2 | number:'1.2-2'}}</b></span>
            </li>
            <li  *ngIf= "state === 'Maharashtra'">
              <span>SGST</span>
              <span><b>₹{{calGST/2 | number:'1.2-2'}}</b></span>
            </li>
            <li>
              <span>Total Payable Amount</span>
              <span><b>₹{{total}}</b></span>
            </li>
          </ul>

          <div class="paymentBtn"  *ngIf="!transactionFailed">
            <button class="btn" [disabled]="isSubmit" (click)="getForPaymentMethod()">Proceed to Payment</button>
          </div>

          <div class="paymentBtn"  *ngIf="transactionFailed">
            <button class="btn" [disabled]="isSubmit" (click)="getForPaymentMethod()">Retry Payment</button>
          </div>

          <div class="alertBox">
              <img src="../../../assets/images/homeImage/alertBoxIcon.svg" alt="">
              <div class="downwardContent">

                <p>You will need to submit your 12-months Bank Statements of your Current or Savings Account to start the analysis.
                </p>
                <p>Don't worry, we have an easy upload process.</p>
                
              </div>
            
          </div>

          
         
        </div>
      </div>

      <div class="col-lg-6 co-md-12 col-sm-12">
        <div class="col-lg-8 col-md-10 col-sm-12 m-auto">
          <h5 class="productText">Your Details</h5>
          <ul class="nameList">
            <li>
              <span>Full Name</span>
              :
              <span>{{fullName}}</span>
            </li>
            <li>
              <span>Mobile Number</span>
              :
              <span>+91 {{mobile}}</span>
            </li>
            <li>
              <span>Company Name</span>
              :
              <span> {{companyName}}</span>
            </li>
          </ul>
          <h5 class="productText">Product Summary</h5>
          <div class="paymentPlan">
            <div class="box">
              <h3>{{filteredData?.Headertext}} Plan</h3>
              <del>{{cuttedPrice}}</del>
              <span>₹{{planPrice | number:'':'en-IN'}} <small>+GST</small></span>
              <p>1 report per {{per_text}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<form id="paymentForm" *ngIf="showForm" method="post" [action]="paymentGUrl">
  <input type="hidden" name="merchantId" [value]="reqData?.merchantId">
  <input type="hidden" name="reqData" [value]="reqData?.reqData">
  <!-- <button type="submit">Pay Now</button> -->
</form>